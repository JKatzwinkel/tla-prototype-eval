{% extends "../search_results.html" %}
{% load static %}
{% load js %}

{% block title %}TLA - Occurences lemma ID {{params.lemma}} ({{params.transcription}}){% endblock %}

{% block content %}
<!-- Page Content -->
<div class="container content my-4">

	<div class="row">
		<!-- Breadcrumbs -->
		<div class="col-12">
			<nav aria-label="breadcrumb">
			  <ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="#">Home</a></li>
				<li class="breadcrumb-item"><a href="/search">Search</a></li>
				<li class="breadcrumb-item active" aria-current="page">Search Results</li>
			  </ol>
			</nav>
		</div>
	</div><!-- /.row -->
    
    <div id="button-bar-small" class="sticky-top d-lg-none">
        <div class="functional-icon-set">
            
            <a href="/search"><button type="button" class="btn btn-red text-left text-decoration-none solo-icon float-left"><i class="fa fa-search"></i><span class="d-none d-lg-block">Modify Search</span></button></a>
            
            <a href="javascript:history.back()"><button type="button" class="btn btn-red text-left text-decoration-none solo-icon"><i class="fas fa-arrow-circle-left"></i><span class="d-none d-lg-block">Back to Lemma</span></button></a>   
            
            
            <div class="functional-icons float-right solo-icon sidebar-btn">
                <a href="#" class="btn btn-light" ><i class="fa fa-eye"></i></a>               
            </div>
            

            <div class="functional-icons float-right solo-icon">
                <a href="#" class="btn btn-red text-left text-decoration-none " role="button"><i class="fas fa-info-circle fa-lg"></i></a>
            </div>
            
              <div class="functional-icons ml-3 float-right share-button solo-icon">
              <a href="#" class="btn btn-light" role="button" data-toggle="modal" data-target="#modal_sharing"><i class="fa fa-share-alt share-results"></i></a>           
            </div>           
            
		</div>
    </div><!-- /#button-bar-small-->
    
	
	<!-- Suchergebnis + sortieren-->	
	<div class="row search-entries detail">
		<div class="col-sm-12 col-lg-8 result">
			<h2 class="bbaw-libertine mt-3"><mark>Occurences lemma ID {{params.lemma}} (##transkr##{{params.transcription}})</mark></h2> <!--## transcription wird nicht mitgeliefert -->
		</div>
        
        <div class="col-md-4 align-right align-baseline d-none d-lg-block">
            <div class="functional-icons ml-3 ">
              <a href="#" class="btn btn-light solo-icon" role="button" data-toggle="modal" data-target="#modal_sharing">Share&nbsp;&nbsp;<i class="fa fa-share-alt share-results"></i></a>              
            </div>
                       
            <div class="functional-icons mr-0 ">
                <a href="#" class="btn btn-red text-left text-decoration-none solo-icon" role="button">Help&nbsp;&nbsp;<i class="fas fa-info-circle fa-lg"></i></a>
            </div>
		</div>	
           	
    </div><!-- /.row -->
	
	<!-- Trefferanzahl-->
	<div class="row searchresult">		
			<div class="col-sm-12 pt-3">
			<p class="result-entries">Results: <b>{{start}} - {{end}}</b> of <b>{{hitcount}}</b> occurences in texts</p>
			</div>
	</div><!-- /.row -->  
	  	
	<!-- Trefferliste -->
	<div class="row occ-list">	
		<div class="col-sm-12 col-lg-8">
		<!-- Treffer -->
            
        {% for hit in hits %}
        <div class="occ-list-item pt-1 pb-1" id="{{hit.occurence.id}}">
        <div class="container-annotation-switch hide">
            <div class="container-annotation mt-2 mb-2">
                {% for token in hit.sentence.tokens %}
                <ul class="annotation-block {%if token.highlight%}highlight-{{token.highlight}}{%endif%}">
                    <li class="word-id hide">  <!-- ### add class ### -->
					    {% if token.id %}
						   <button type="button" class="btn btn-light btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('{{token.id}}')"><span class="fas fa-clipboard"></span>Copy word ID</button>
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>
                    <li class="hieroglyph" {% if token.type == 'word' %}onclick="window.open('/view/lemma/{{token.lemma}}','_blank')"{% endif %}>
                        <canvas class="res occ-tok-glyphs" style="font-size: 20px; vertical-align: -5px;"  title="{{token.glyphs}}">
                        {% if token.glyphs %}
                            {{token.glyphs}}
                        {% else %}
                            empty
                        {% endif %}
                       </canvas>
					</li>
                    <li class="transcription" {% if token.type == 'word' %}onclick="window.open('/view/lemma/{{token.lemma}}','_blank')"{% endif %}>
					    {% if token.label %}
                           {{token.label}}
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>
                    <!--<li class="lemma-id hide" {% if token.type == 'word' %}onclick="window.open('/view/lemma/{{token.lemma}}','_blank')"{% endif %}>
					    {% if token.lemma %}
                           {{token.lemma}}
						{% else %}
                            &nbsp;
                        {% endif %}
					</li>-->
                    <li class="part-of-speech hide"> 
						##POS##<!-- ##Inhalt aktuell noch nicht in token mitgeliefert  -->
					    {% if token.xxx %}
                           {{token.xxx}}
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>
                    <li class="ling-glossing hide condensed">
						##ling.gloss##<!-- ##Inhalt aktuell noch nicht in token mitgeliefert  -->
					    {% if token.xxx %}
                           {{token.xxx}}
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>
                    <li class="flexcode hide condensed"> <!-- ##Achtung in 'glossing' steht BTS glossing, nicht ling. glossing  -->
					    {% if token.glossing %} 
                           {{token.glossing}}
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>
                    <li class="translations translation-de">
					    {% if token.translations.de %}
 							{%for translation in token.translations.de %}
								{{translation}}
							{%endfor%}
                        {% else %}
                            &nbsp;
                        {% endif %}
					</li>               
                    <!-- <li class="translations translation-en hide"> <! -- ##Inhalt aktuell noch nicht in token mitgeliefert, gibt es nicht?  -- >
					    {% if token.translations.en %}
							{%for translation in token.translations.en %}
								{{translation}}
							{%endfor%}
                        {% else %}
                            &mdash;
                        {% endif %}
					</li>               
                    <li class="translations translation-fr hide"> <! -- ##Inhalt aktuell noch nicht in token mitgeliefert, gibt es nicht? -- >
						{% if token.translations.fr %}
							{%for translation in token.translations.fr %}
								{{translation}}
							{%endfor%}
                        {% else %}
                            &mdash;
                        {% endif %}
					</li>                 -->
                </ul>
                {% endfor %}          
               
                </div> <!-- container-annotation close -->
            </div> <!-- container-switch close -->           
			
            <div class="container-annotation-switch">
                
                    <!-- Lemma -->
                    <h3 class="word bbaw-libertine">
                        {% for token in hit.sentence.tokens %}
                        <a{% if token.type == 'word' %} href="/view/lemma/{{token.lemma}}" target="_blank"{% endif %}>
                            <span id="{{token.id}}" class="occ-tok {%if token.highlight%}highlight-{{token.highlight}}{%endif%} bbaw-libertine" {% if token.type == 'word' %}onclick="window.open('/view/lemma/{{token.lemma}}','_blank')"{% endif %}>
                                    {% if token.label %}
                                        {{token.label}}
                                    {% endif %}
                            </span>
                        </a>
                        {% endfor %}
                    </h3>

                    <div class="hieroglyph mb-1">
                        {%for token in hit.sentence.tokens%}
                        <span class="glyphbox">
                            {%if token.glyphs%}
                             <a{% if token.type == 'word' %} href="/view/lemma/{{token.lemma}}" target="_blank"{% endif %}>
								<canvas class="res occ-tok-glyphs {%if token.highlight%}highlight-{{token.highlight}}{%endif%}" title="{{token.glyphs}}">
									{{token.glyphs}}
								</canvas>
							</a>
                            {%endif%}
                        </span>
                        {%endfor%}
                    </div>
                
            </div> <!-- container-switch close -->
            
				<!-- Translation DE -->
				{% for translation in hit.sentence.translations.de %}
					<p class="translations translation-de"><span class="lang-icon">DE</span> {{translation}}</p>
				{% endfor %}
				<!-- Translation EN  -->
				{% for translation in hit.sentence.translations.en %}
					<p class="translations translation-en hide"><span class="lang-icon">EN</span> {{translation}}</p>
				{% endfor %}
				<!-- Translation FR -->
				{% for translation in hit.sentence.translations.fr %}
					<p class="translations translation-fr hide"><span class="lang-icon">FR</span> {{translation}}</p>
				{% endfor %}

				<div class="corpus-paths">
					{%for path in hit.text.paths%}
					<p class="corpus-path">
					    {%for object in path%}
						<span id="{{hit.text.id}}-{{object.id}}" class="corpus-path-element">
							<a href="{{object.url}}">
								{{object.name}}
                                <i class="fas fa-arrow-circle-right"></i>
							</a>
							{%if not forloop.last%}
							
							{%endif%}
						</span>
						{%endfor%}
						<a href="/view/occurrence/{{hit.occurrence.id}}">
							<span class="lc">
							 [{{hit.occurrence.line}}]
							</span>
						</a>
					</p>
					<p class="sentence-id-button"><button type="button" class="btn btn-light btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('{{hit.sentence.id}}')"><span class="far fa-clipboard"></span>Copy sentence ID</button></p>
					{%endfor%}
				</div>	
				
							
			
         </div> <!--.Treffer -->
			{% endfor %}


		</div> <!-- .col-sm-8 -->
	
	
		<!-- Sidebar large -->
		<div class="col-lg-4 d-none d-lg-block">
			<div class="sticky-top">
				<div class="input-group mb-3">
					<div class="input-group-append">
						<label class="input-group-text" for="inputGroupSelect02">Order by</label>
					</div>
					<select class="custom-select" id="inputGroupSelect02">
						<option value="1">attestation time, start</option>
						<option value="2" selected>attestation time, middle</option>
						<option value="3">attestation time, end</option>
					</select>			  
				</div>

				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail hieroglyph-btn "><i class="fas fa-minus-circle"></i>Hieroglyphs</button>

                <!-- start ANNOTATION buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail anno-block-btn"><i class="fas fa-plus-circle"></i>Switch Annotation/Block-View</button>
				
                <div class="indented-buttons indented-buttons-annotation hide">
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail word-id-btn "><i class="fas fa-plus-circle"></i>Word ID</button><!--new-->
                    <!--<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail lemma-id-btn "><i class="fas fa-plus-circle"></i>Lemma ID</button>-->
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail part-of-speech-btn"><i class="fas fa-plus-circle"></i>Part of Speech</button>
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail ling-glossing-btn"><i class="fas fa-plus-circle"></i>Linguistic glossing</button>
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail flexcode-btn"><i class="fas fa-plus-circle"></i>TLA flexcode</button>
				    <!--<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail attestation-time-btn"><i class="fas fa-plus-circle"></i>Attestation time</button>-->
				</div>	

                <!-- start LANGUAGE buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail languages-btn mt-2">Translation Languages</button>                 
				
                <div class="indented-buttons indented-buttons-lang hide">
                     <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-de" type="button"><i class="fas fa-minus-circle"></i>German</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-en" type="button"><i class="fas fa-plus-circle"></i>English</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-fr" type="button"><i class="fas fa-plus-circle"></i>French</button>
				</div>
                
				<br>
				
				<a href="javascript:history.back()"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-left"></span>Back to lemma</button></a>
				<!-- anstelle des historyBack sollte u.U. der Search-String verwendet werden -->
				
				<a href="/search"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-left"></span>Modify Search</button></a>
			</div>
		</div>
	</div> <!-- /.row -->
    
    <!-- Sidebar small-->
    
    <div id="sidebar" class="d-lg-none">
        <div class="sidebar-wrapper">                        
            <div class="close-sidebar">
                <a href="#"><button type="button" class="btn btn-block btn-red text-left text-decoration-none show-detail"><span class="fas fa-times"></span>hide options</button>
                </a>
            </div>
            
            <div class="input-group mt-2 mb-3">
					<div class="input-group-append">
						<label class="input-group-text" for="inputGroupSelect02">Order by</label>
					</div>
					<select class="custom-select" id="inputGroupSelect02">
						<option value="1">attestation time, start</option>
						<option value="2" selected>attestation time, middle</option>
						<option value="3">attestation time, end</option>
					</select>			  
				</div>

				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail hieroglyph-btn "><i class="fas fa-minus-circle"></i>Hieroglyphs</button>
                
                <!-- start ANNOTATION buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail anno-block-btn"><i class="fas fa-plus-circle">
                </i>Switch Annotation/Block-View</button>
                <div class="indented-buttons indented-buttons-annotation hide">
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail word-id-btn "><i class="fas fa-plus-circle"></i>Word ID</button><!--new-->
                    <!--<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail lemma-id-btn "><i class="fas fa-plus-circle"></i>Lemma ID</button>-->
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail part-of-speech-btn"><i class="fas fa-plus-circle"></i>Part of Speech</button>
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail ling-glossing-btn"><i class="fas fa-plus-circle"></i>Linguistic glossing</button>
                    <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail flexcode-btn"><i class="fas fa-plus-circle"></i>TLA flexcodes</button>
				    <!--<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail attestation-time-btn"><i class="fas fa-plus-circle"></i>Attestation time</button>-->
				</div>	
                
                <!-- start LANGUAGE buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail languages-btn">Translation Languages</button>                 
				
                <div class="indented-buttons indented-buttons-lang hide">
                     <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-de" type="button"><i class="fas fa-minus-circle"></i>German</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-en" type="button"><i class="fas fa-plus-circle"></i>English</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-fr" type="button"><i class="fas fa-plus-circle"></i>French</button>
				</div>

				<br>
				
				<a href="javascript:history.back()"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-left"></span>Back to lemma</button></a>
				<!-- anstelle des historyBack sollte u.U. der Search-String verwendet werden -->
				
				<a href="/search"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fa fa-search"></span>Modify Search</button></a>
			
                
            
            
        </div>
    </div>
    
    <!-- Modal for Sharing-- >
    <div class="modal fade" id="modal_sharing" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Share this article</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">            
              <a href="#" class="btn btn-block btn-info" role="button"><span class="far fa-envelope"></span>E-Mail</a> 
              <a href="#" class="btn btn-block btn-info" role="button"><span class="fab fa-twitter"></span>Twitter</a> 
              <a href="#" class="btn btn-block btn-info" role="button"><span class="fab fa-facebook"></span>Facebook</a> 
          </div>
          
        </div>
      </div>
    </div>-->
    
     <!-- Modal for Sharing-->
    <div class="modal fade" id="modal_sharing" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Share this article</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body"> 	  
              <a href="mailto:?subject=TLA,%20Occurences%20lemma%20{{params.lemma}}&amp;body=TLA, occurences lemma ID {{params.lemma}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}), &lt;{{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}&gt;, in: {{tlaTitle}} &lt;{{tlaBaseURL}}&gt;, Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, ed. by {{tlaEditor}} (accessed: {{dateToday}})" class="btn btn-block btn-info" role="button"><span class="far fa-envelope"></span> E-mail citation</a> 
              <a href="https://twitter.com/share?url={{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}" title="Twitter" class="btn btn-block btn-info" role="button" target="_blank"><span class="fab fa-twitter"></span> Twitter URL</a>
              <a href="http://www.facebook.com/share.php?u={{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}" class="btn btn-block btn-info" role="button" target="_blank"><span class="fab fa-facebook"></span> Facebook</a> 
          </div>        
		</div>
      </div>
    </div>
    
</div><!-- /.container Content -->
{% endblock %}