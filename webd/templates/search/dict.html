{% extends "../search_results.html" %}
{% load static %}
{% load js %}

{% block title %}TLA - Search results for {{params.transcription}}{% endblock %}

{% block content %}
<!-- Page Content -->
<div class="container content my-4">

	<div class="row">
		<!-- Breadcrumbs -->
		<div class="col-12">
			<nav aria-label="breadcrumb">
			  <ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="#">Home</a></li>
				<li class="breadcrumb-item"><a href="/search">Search</a></li>
				<li class="breadcrumb-item active" aria-current="page">Search results</li>
			  </ol>
			</nav>
		</div>
	</div><!-- /.row -->

    <div id="button-bar-small" class="sticky-top d-lg-none">
        <div class="functional-icon-set">
            
            <a href="/search"><button type="button" class="btn btn-red text-left text-decoration-none float-left"><i class="fa fa-search"></i><span class="d-none d-lg-block">Modify search</span></button></a>
            
            <div class="functional-icons float-right solo-icon sidebar-btn">
                <a href="#" class="btn btn-light" ><i class="fa fa-eye"></i></a>               
            </div>
            

            <div class="functional-icons float-right solo-icon">
                <a href="#" class="btn btn-red text-left text-decoration-none " role="button"><i class="fas fa-info-circle fa-lg"></i></a>
            </div>
            
              <div class="functional-icons ml-3 float-right share-button solo-icon">
              <a href="#" class="btn btn-light" role="button" data-toggle="modal" data-target="#modal_sharing"><i class="fa fa-share-alt share-results"></i></a>           
            </div>           
            
		</div>
    </div><!-- /#button-bar-small-->
    
	
	<!-- Suchergebnis + sortieren-->	
	<div class="row search-entries">
		<div class="col-sm-12 col-lg-8 result">
            <h2 class="id mt-1">Search results</h2> 
            <p class="ml-3">Query: 
            {%for param in params.lists%} 
				{{param.0}} = 
				{%for val in param.1%} 
					"<span class="bbaw-libertine">{{val}}</span>"{% if not forloop.last%} /{%endif%} 
				{%endfor%}
				{% if not forloop.last%}; {%endif%}
			{%endfor%}
            </p>
		</div>
        
        <div class="col-md-4 align-right align-baseline d-none d-lg-block">

            <div class="functional-icons ml-3">
              <a href="#" class="btn btn-light solo-icon" role="button" data-toggle="modal" data-target="#modal_sharing">Share&nbsp;&nbsp;<i class="fa fa-share-alt share-results"></i></a>        
            </div>

            <div class="functional-icons mr-0 ">
                <a href="#" class="btn btn-red text-left text-decoration-none solo-icon" role="button">Help&nbsp;&nbsp;<i class="fas fa-info-circle fa-lg"></i></a>
            </div>
		</div>	
			
         
        
    </div><!-- /.row -->
    
	
    
	<!-- Trefferanzahl-->
	<div class="row searchresult">		
			<div class="col-sm-12 col-lg-8 pt-3">
                <p class="result-entries">Results: {%if hitcount > 0%}<b>{{start}} - {{end}}</b> of <b>{{hitcount}}</b> dictionary entries{%else%}<b>none</b>{%endif%} 
                    <!--<a href="#" class="btn btn-light solo-icon float-right mr-1" role="button" data-toggle="modal" data-target="#modal_sharing"><span class="fa fa-share-alt share-results"/></a>-->
                </p>  
                
                
                
			</div>
	</div><!-- /.row -->  
	  	
	<!-- Trefferliste -->
	<div class="row result-list">	
		<div class="col-sm-12 col-lg-8">
		<!-- Treffer -->
            {% for indent, pred, hit in hits %}        
			<div class="result-list-item indent-{{indent}} {% if hit.revisionState == 'published-obsolete' %}notok{% endif %}">
				<!-- indent in views.py  --><!--{%if pred%}{{pred}}{%endif%}-->
                
                {% if pred %}
					<div class="lemma-rel {{pred}}"></div> <!-- lemma-beziehung -->
				{% endif %}
                
                <div class="result-bg" id="{{hit.id}}" onclick="window.open('/view/lemma/{{hit.id}}','_self')">
					<!-- Redaktionsstatus & Anzahl Occurences-->
					<div class="pt-1">
						<!--<div class="red-status float-right ml-2">
							<span class="far fa-check-circle {% if hit.occurrences > 0 %}ok{% elif hit.revisionState == "published" %}pending{% else %}notok{% endif %}"></span>
						</div>-->
                        <div class="icon red-status float-right ml-2">
							<span class="{% if hit.revisionState == 'published' %}ok{% elif hit.revisionState == 'published-awaiting-review' %}pending{% elif hit.revisionState == 'published-obsolete' %}notok{% endif %}"/>
							<!--<span class="{% if hit.occurrences > 0 %}ok{% elif hit.revisionState == "published" %}pending{% else %}notok{% endif %}"></span>-->
						</div>
                        
						{% if hit.occurrences > 0 %}
						   <div class="number_occurences float-right">
								<p>Occ.:&nbsp;{{hit.occurrences}}</p>
							</div>
						{% endif %} 
					</div>	
					
					<!-- erste Zeile -->
					<div> 
						<a href="/view/lemma/{{hit.id}}" title="{%if pred%}{{pred}}{%endif%}"> <!-- lemma-beziehung -->
						<h2 class="word bbaw-libertine">
							{{hit.name}}
						</h2>
						<!-- Hieroglyph -->
							<span class="hieroglyph">
								{% for word in hit.words %}
									{% if word.glyphs %}
										<span class="glyphbox">
											<!-- TODO font-size: 20px; vertical-align: -5px; in css verschieben -->
											<canvas class="res" style="font-size: 20px; vertical-align: -5px;" title="{{word.glyphs}}">
												{{word.glyphs}}
											</canvas>
										</span>
									{% endif %}
								{% endfor %}
							</span>

						<!-- Lemma ID -->
						<span class="result-list-lemma-id hide">
							&nbsp; (ID {{hit.id}})
						</span>
						</a>
					</div>
					
					 <!-- zweite Zeile -->
					<div>
						<!-- Wordclass -->
						<span class="word-class hide">
							<strong>
								<span class="font-italic word-class-type">{{hit.type|nicePOS}}</span>
								{%if hit.subtype%}<span class="word-class-type">({{hit.subtype|niceSubPOS}})</span>{%endif%}
							</strong>
						</span>
						
						<!-- Translations -->
						<!-- Translation DE -->
						<span class="translations translation-de">
							<span class="font-italic hide">[{{hit.type}}]</span><div class="lang-icon">DE</div>
							{%for translation in hit.translations.de%}
							{{translation}}
							{%endfor%}
						</span>
						<!-- Translation EN -->
						<span class="translations translation-en hide">
							<span class="font-italic hide">[{{hit.type}}]</span><div class="lang-icon">EN</div>
							{%for translation in hit.translations.en%}
							{{translation}}
							{%endfor%}					
						</span>
						<!-- Translation FR -->
						<span class="translations translation-fr hide">
							<span class="font-italic hide">[{{hit.type}}]</span><span class="lang-icon">FR</span>
							{%for translation in hit.translations.fr%}
							{{translation}}
							{%endfor%}					
						</span>
			   
						<!-- Attestation time -->
						<span class="result-list-attestation-time hide">(##att.time##{{hit.xxx}})</span> <!-- ##Variable noch nicht verfÃ¼gbar -->
						
						<!-- Bibliography -->
						<span class="result-list-bibliography hide">({{hit.bibliography}})</span>
					</div>
				</div> <!-- /. result-bg --> 
			
				<!-- combination-search -->
				<div class="combination-search ml-4 my-1 hide">
					<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
					  <label class="form-check-label" for="inlineCheckbox2">Select for Combination Search</label>
				</div>
				<hr>
            </div> <!-- /. result-list-item -->
			
            {% endfor %}
            
        </div> <!-- .col-8 -->    
       	
<!-- Sidebar large-->
		<div class="col-lg-4 d-none d-lg-block">
            <div class="sticky-top">
				<div class="input-group mb-3">
					<div class="input-group-append">
						<label class="input-group-text" for="inputGroupSelect02">Order by</label>
					</div>
					<select class="custom-select" id="inputGroupSelect02">
						<option value="1" selected>Alphabetical, hierarchical</option>
						<option value="2">Alphabetical, strictly</option>
						<option value="3">Attestation time, start</option>
						<option value="4">Attestation time, middle</option>
						<option value="5">Attestation time, end</option>
					</select>			  
				</div>
			
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail hieroglyph-btn "><i class="fas fa-minus-circle"></i>Hieroglyphs</button>
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail lemma-id-btn "><i class="fas fa-plus-circle"></i>Lemma ID</button>
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail word-class-btn"><i class="fas fa-plus-circle"></i>Word class</button>
                
                <!-- start LANGUAGE buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail languages-btn">Translation languages</button>                 
				
                <div class="indented-buttons indented-buttons-lang hide">
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-de" type="button"><i class="fas fa-minus-circle"></i>German</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-en" type="button"><i class="fas fa-plus-circle"></i>English</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-fr" type="button"><i class="fas fa-plus-circle"></i>French</button>
				</div>
                
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail attestation-time-btn "><i class="fas fa-plus-circle"></i>Attestation time</button>
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail bibliografical-btn "><i class="fas fa-plus-circle"></i>Bibliographical references </button>                
                	                
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail combination-search-btn" disabled><i class="fas fa-plus-circle"></i>Select for combination Search</button>

                <button type="button" class="btn btn-block btn-light text-left text-decoration-none show-detail mb-2" disabled><span class="fas fa-search-plus"></span>Execute combination search</button>
                
                <a href="/search"><button type="button" class="btn btn-block btn-red text-left text-decoration-none mb-2"><span class="fas fa-arrow-circle-left"></span>Modify search</button></a>
            </div>
		</div>
	</div> <!-- /.row -->	  
    
    
    <!-- Sidebar small-->
    
    <div id="sidebar" class="d-lg-none">
        <div class="sidebar-wrapper">                        
            <div class="close-sidebar">
                <a href="#"><button type="button" class="btn btn-block btn-red text-left text-decoration-none show-detail"><span class="fas fa-times"></span>Hide options</button>
                </a>
            </div>
            
            <div class="input-group mt-2 mb-3">
					<div class="input-group-append">
						<label class="input-group-text" for="inputGroupSelect02">Order by</label>
					</div>
					<select class="custom-select" id="inputGroupSelect02">
						<option value="1" selected>Alphabetical, hierarchical</option>
						<option value="2">Alphabetical, strictly</option>
						<option value="3">Attestation time, start</option>
						<option value="4">Attestation time, middle</option>
						<option value="5">Attestation time, end</option>
					</select>			  
				</div>
			
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail hieroglyph-btn "><i class="fas fa-minus-circle"></i>Hieroglyphs</button>
            
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail lemma-id-btn "><i class="fas fa-plus-circle"></i>Lemma ID</button>
            
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail word-class-btn"><i class="fas fa-plus-circle"></i>Word class</button>
                
                <!-- start LANGUAGE buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail languages-btn">Translation languages</button>                 
				
                <div class="indented-buttons indented-buttons-lang hide">
                     <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-de" type="button"><i class="fas fa-minus-circle"></i>German</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-en" type="button"><i class="fas fa-plus-circle"></i>English</button>
                    <button class="btn btn-block btn-secondary text-left text-decoration-none show-detail translation-languages-btn-fr" type="button"><i class="fas fa-plus-circle"></i>French</button>
				</div>
                
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail attestation-time-btn "><i class="fas fa-plus-circle"></i>Attestation time</button>
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail bibliografical-btn "><i class="fas fa-plus-circle"></i>Bibliographical references </button>                
                	                
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail combination-search-btn"><i class="fas fa-plus-circle"></i>Select for combination search</button>

                <button type="button" class="btn btn-block btn-light text-left text-decoration-none show-detail combination-search-btn"><span class="fas fa-search-plus"></span>Execute combination search</button>
                
                <a href="/search"><button type="button" class="btn btn-block btn-red text-left text-decoration-none mt-2"><span class="fas fa-arrow-circle-left"></span>Modify search</button></a>
            
            
        </div>
    </div>
    
    
     <!-- Modal for Sharing-->
    <div class="modal fade" id="modal_sharing" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Share these Results</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">            
              <a href="mailto:?subject=TLA,%20Occurences%20lemma%20{{params.lemma}}&amp;body=TLA, occurences lemma ID {{params.lemma}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}), &lt;{{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}&gt;, in: {{tlaTitle}} &lt;{{tlaBaseURL}}&gt;, Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, ed. by {{tlaEditor}} (accessed: {{dateToday}})" class="btn btn-block btn-info" role="button"><span class="far fa-envelope"></span> E-mail citation</a> 
              <a href="https://twitter.com/share?url={{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}" title="Twitter" class="btn btn-block btn-info" role="button" target="_blank"><span class="fab fa-twitter"></span> Twitter URL</a>
              <a href="http://www.facebook.com/share.php?u={{tlaBaseURL}}/search/occurrences?lemma={{params.lemma}}" class="btn btn-block btn-info" role="button" target="_blank"><span class="fab fa-facebook"></span> Facebook</a> 
          </div>        
        </div>
      </div>
    </div>
    <!-- /. Modal -->
    
</div><!-- /.container Content -->
{% endblock %}
