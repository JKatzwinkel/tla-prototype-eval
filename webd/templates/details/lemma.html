{% extends "../base.html" %}
{% load static %}
{% load js %}

{% block title %}TLA lemma ID {{lemma.id}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}){% endblock %}

{% block content %}
<!-- Page Content -->
<div class="container content my-4">

	<div class="row">
		<!-- Breadcrumbs -->
		<div class="col-12">
			<nav aria-label="breadcrumb">
			  <ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="#">Home</a></li>
				<li class="breadcrumb-item"><a href="/search">Search</a></li>
				<li class="breadcrumb-item active" aria-current="page">Details: Dictionary Entry</li>
			  </ol>
			</nav>
		</div>
	</div><!-- /.row -->
  
	<div class="row search-entries detail">
	<!-- Suchergebnis -->		
		<div class="col-md-8 result">	
			<h4 class="id mt-1">Lemma-ID {{lemma.id}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %})<span class="Z3988" title="{{coins}}"></span></h4>
			<span class="solo-icon red-status float-right"><span class="fa-check-circle {% if lemma.revisionState == 'published' %}ok{% elif lemma.revisionState == 'published-awaiting-review' %}pending{% elif lemma.revisionState == 'published-obsolete' %}notok{% endif %}"/></span>
		</div>
		<div class="col-md-4 align-right align-baseline">
            <div class="functional-icons ml-3 float-left">
              <a href="#" class="btn btn-light solo-icon" role="button" data-toggle="modal" data-target="#modal_sharing"><span class="fa fa-share-alt share-results"/></a>
              <a href="#" class="btn btn-light solo-icon" role="button" data-toggle="modal" data-target="#modal_comments"><span class="far fa-comment"/></a>
            </div>
            <div class="functional-icons mr-0 ">
                <a href="#" class="btn btn-red text-left text-decoration-none float-right" role="button">Help&nbsp;&nbsp;<span class="fas fa-info-circle fa-lg"></span></a>
            </div>
		</div>		
	</div>
	<!-- /.row -->
  
  	
	<!-- Content Details -->
	<div class="row details-content">	
		<div class="col-sm-8">
			<div class="lemma pt-3">
				<p><strong>Hieroglyphic spellings:</strong>
				{% for word in lemma.words %}
					{% if word.glyphs %}
					<span class="glyphbox">
						<canvas class="res" title="{{word.glyphs}}">
							{{word.glyphs}}
						</canvas>
					</span>
					{% endif %}
				{% endfor %}</p>
			</div>
			<!-- persistente URL / ID -->
			<div>
				<hr>
				<p><strong>Persistent Identifiers</strong>
				<br><strong>Persistent lemma ID:</strong> {{lemma.id}} 
                <button type="button" class="btn btn-light btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('{{lemma.id}}')"><span class="fas fa-clipboard"></span>Copy ID</button>
				<br><strong>Persistent URL:</strong> {{tlaBaseURL}}/view/lemma/{{lemma.id}} <button type="button" class="btn btn-light btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('TLA lemma ID {{lemma.id}} ({% for word in lemma.words %}{{word.transcription}}{% endfor %}), &lt;{{tlaBaseURL}}/view/lemma/{{lemma.id}}&gt;, in: {{tlaTitle}} &lt;{{tlaBaseURL}}&gt;, Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, ed. by {{tlaEditor}} (accessed: {{dateToday}})');"><span class="fas fa-clipboard"></span>Copy citation</button>
                </p>
			</div>
			<div class="grammar">
				<hr>
				<p><strong>Part of Speech:</strong>&nbsp;
				<span>
					{{lemma.type}}
					{% if lemma.subtype %}
						({{ lemma.subtype }})
					{% endif %}
				</span></p>
			</div>
			<div class="translation">
				<hr>				
				<p><strong>Translation</strong></p>
				{% for translation in lemma.translations.de %}
					<p class="h6">(Ger.) {{ translation }}</p>
				{% endfor %}
				{% for translation in lemma.translations.en %}
					<p class="english">(Engl.) {{ translation }}</p>
				{% endfor %}
				{% for translation in lemma.translations.fr %}
					<p class="french">(Fr.) {{ translation }}</p>
				{% endfor %}
			</div>	
		
			<!-- Beleglage -->  
			<div>
				<hr>
				<p><strong>Attestation</strong>
				<br><strong>Occurences:</strong>&nbsp;
				{% for where, count in occurrences.items %}
                </p>
				<a href="/search/occurrences?lemma={{lemma.id}}">
					<button type="button" class="btn btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-right"></span>{{where}}: {{count}}</button>
				</a>
				{% endfor %}
				<br>
                <p><strong>Time:</strong>&nbsp;<a href="#">{{ lemma.xxx }}</a></p> <!--## Werte noch nicht mitgeliefert -->
			</div> 
			
			<!-- Bibliographie -->
			<div>
				<hr>
                <p>
				<strong>Bibliography</strong>
				<br>
				{% for bib in bibl %}
					<span class="fas fa-arrow-circle-right"></span>{{bib}} &emsp;
				{% endfor %}
                </p>
				<hr>
			<div>
			
			<!-- Verweise -->
			</div>
				<p><strong>External references</strong></p>             
				{% for provider, references in lemma.externalReferences.items %}
					{% for reference in references %}
						{% if reference|isURL %}
						<a href="{{reference}}" target="_blank">
							<button type="button" class="btn btn-red text-left text-decoration-none">
								<span class="fas fa-arrow-circle-right"></span>{{provider}}&nbsp;<em>{{reference}}</em>
							</button>
						</a>
						{% else %}
							<span class="fas fa-arrow-circle-right"></span>{{provider}}&nbsp;<em>{{reference}}</em> &emsp;
						{% endif %}
					{% endfor %}
				{% endfor %}
			</div>

			<!-- Kommentar -->  
			<div class="comment pb-4">
				<hr>
				<p class="comment-title"><strong>Comment-Title</strong></p>
				<p class="comment-title">Comment-Subtitle</p>
				<p class="comment-content">Es sequi illore ne reptation cone videm fugia dolendu ntectotas nihit rat lit fugiatum doluptatecto que maximpe eaquatin nis rehent quam, corum accatem oluptas inus doloremolo ea volum quibus voluptaque volupta amet optaers piendusae.</p>
				<p class="comment-author float-right">Edited by&nbsp;<strong>Vorname Name</strong>&nbsp;on <span class="comment-date"><strong>20.08.2019</strong></span></p>
			</div>     

			<!-- Weitere Annotationen -->  
			<div>
				<hr>
				<p><strong>Annotations</strong>
				<br><strong>Language:</strong> {{ lemma.xxx }}  <!--## Wert noch nicht mitgeliefert -->
				<br><strong>Script:</strong> {{ lemma.xxx }}  <!--## Wert noch nicht mitgeliefert -->
                </p>
			</div>
															 
			<!-- Lemma Relations -->
			<div class="relations">
				<hr>
				<p class="relations"><strong>Lemma Relations</strong></p><!-- ## Werden schon alle Relationen mitgeliefert? -->
				{% if lemma.relations %} <!--# Abfrage, ob überhaupt welche enthalten sind, stimmt nicht -->
					{% for where, hits in lemma.relations.items %}
					<p><strong>{{where|niceRelationName}}</strong></p>
						{% for hit in hits %}
						<div class="result-list"> <!-- ##identisch mit der in dict.html => ausgliedern? -->						
							<div class="result-list-item indent-1 {% if hit.revisionState == 'published-obsolete' %}notok{% endif %}"> <!-- indent functioniert nicht -->
								
								<div class="lemma-rel {{where}}"></div> <!-- lemma-beziehung -->
								
								<div class="result-bg" id="{{hit.id}}" onclick="window.open('/view/lemma/{{hit.id}}','_self')">
									<!-- Redaktionsstatus & Anzahl Occurences-->
									<div class="pt-1">
										<div class="red-status float-right ml-2">
											<span class="{% if lemma.revisionState == 'published' %}ok{% elif lemma.revisionState == 'published-awaiting-review' %}pending{% elif lemma.revisionState == 'published-obsolete' %}notok{% endif %}"/>
										</div>
										{% if hit.occurrences > 0 %}
										   <div class="number_occurences float-right">
												<p>Occ.:&nbsp;{{hit.occurrences}}</p>
											</div>
										{% endif %} 
									</div>	
									
									<!-- erste Zeile -->
									<div> 
										<a href="/view/lemma/{{hit.id}}" title="{%if pred%}{{pred}}{%endif%}"> <!-- lemma-beziehung -->
										<h2 class="word bbaw-libertine">
											{{hit.name}}
										</h2>
										<!-- Hieroglyph -->
											<span class="hieroglyph">
												#hiero# <!-- ##Variable noch nicht verfügbar -->
												{% for word in hit.words %}
													{% if word.glyphs %}
														<span class="glyphbox">
															<!-- TODO font-size: 20px; vertical-align: -5px; in css verschieben -->
															<canvas class="res" style="font-size: 20px; vertical-align: -5px;" title="{{word.glyphs}}">
																{{word.glyphs}}
															</canvas>
														</span>
													{% endif %}
												{% endfor %}
											</span>

										<!-- Lemma ID -->
										<span class="result-list-lemma-id hide">
											&nbsp; (ID {{hit.id}})
										</span>
										</a>
									</div>
									
									 <!-- zweite Zeile -->
									 <div>
										<!-- Wordclass -->
										<span class="word-class hide">
											<strong>
												<span class="font-italic word-class-type">[{{hit.type}}]</span>
												{%if hit.subtype%}<span class="word-class-subtype">({{hit.subtype}})</span>{%endif%}
											</strong>
										</span>
										
										<!-- Translations -->
										<!-- Translation DE -->
										<span class="translations translation-de">
											<span class="font-italic hide">[{{hit.type}}]</span>
											#transl.de# <!-- ##Variable noch nicht verfügbar -->
											{%for translation in hit.translations.de%}
											<span class="translation">{{translation}}</span>
											{%endfor%}
										</span>
										<!-- Translation EN -->
										<span class="translations translation-en hide">
											#transl.en# <!-- ##Variable noch nicht verfügbar -->
											<span class="font-italic hide">[{{hit.type}}]</span>
											{%for translation in hit.translations.en%}
											<span class="translation">{{translation}}</span>
											{%endfor%}					
										</span>
										<!-- Translation FR -->
										<span class="translations translation-fr hide">
											#transl.fr# <!-- ##Variable noch nicht verfügbar -->
											<span class="font-italic hide">[{{hit.type}}]</span> 
											{%for translation in hit.translations.fr%}
											<span class="translation">{{translation}}</span>
											{%endfor%}					
										</span>
							   
										<!-- Attestation time -->
										<span class="result-list-attestation-time hide">(#att.time#{{hit.xxx}})</span> <!-- ##Variable noch nicht verfügbar -->
										
										<!-- Bibliography -->
										<span class="result-list-bibliography hide">(#bibl#{{hit.bibliography}})</span> <!-- ##Variable noch nicht verfügbar -->
									</div>
								</div> 
							<hr>
							</div> <!-- /. result-list-item -->
						</div>  <!-- /. result-list -->
						{% endfor %}
					{% endfor %}
				{% endif %}
							
				<!-- alte Auflistung -->			
				<!--<p>			
				{% if lemma.relations.root %}
					<br>Root:
					{% for root in lemma.relations.root %}
						<span>
							<a href="/view/lemma/{{root.id}}" title="{{root.id}} (Root)" class="bbaw-libertine">
								{{root.name}}
							</a>
						</span>
					{% endfor %}
				{% endif %}
				{% if lemma.relations.partOf %}
					<br>Superordinate Items:
					{% for item in lemma.relations.partOf %}
						<span>{{item}}
							<a href="/view/lemma/{{item.id}}" title="{{item.id}} (Superordinate)" class="bbaw-libertine">
								{{item.name}}
							</a>
						</span>
					{% endfor %}
				{% endif %}
				{% if lemma.relations.contains %}
					<br>Subordinate Items:
					{% for item in lemma.relations.contains %}
						<span>{{item}}
							<a href="/view/lemma/{{item.id}}" title="{{item.id}} (Subordinate)" class="bbaw-libertine">
								{{item.name}}
							</a>
						</span>
					{% endfor %}
				{% endif %}
				{% if lemma.relations.successor %}
					<br>Historical Successor:
					{% for item in lemma.relations.successor %}
						<span>{{item}}
							<a href="/view/lemma/{{item.id}}" title="{{item.id}} (Successor)" class="bbaw-libertine">
								{{item.name}}
							</a>
						</span>
					{% endfor %}
				{% endif %}
				</p>-->
				
				<div class="editor">
				<hr>	
				<p><strong>TLA Editor:&nbsp;<a href="#">{{ lemma.edited.name }}</a></strong>			
				    <br><strong>Last Revision:</strong> {{ lemma.edited.date }}
				    <br><strong>Protocoll:</strong> {{ lemma.xxx }} <!--## Wert noch nicht mitgeliefert -->
				    <br><strong>Review State:</strong> {{ lemma.revisionState }}
                 </p>
				</div>
			</div>  
            
            	
		<!-- Zitationsfeld -->        
		<div class="bg-light citation mt-5 mb-4">         
			<p class="h6"><strong>Please cite as:</strong></p>
				<!-- Version, Issue, Release-Date, heutiges Datum noch per globaler Variable holen -->
			<blockquote>TLA lemma ID {{lemma.id}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}), &lt;{{tlaBaseURL}}/view/lemma/{{lemma.id}}&gt;, 
				in: <i>{{tlaTitle}}</i> &lt;{{tlaBaseURL}}&gt;, 
				Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, 
				ed. by {{tlaEditor}} 
				(accessed: {{dateToday}})</blockquote>
			<button type="button" class="btn btn-secondary btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('TLA lemma ID {{lemma.id}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}), &lt;{{tlaBaseURL}}/view/lemma/{{lemma.id}}&gt;, in: {{tlaTitle}} &lt;{{tlaBaseURL}}&gt;, Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, ed. by {{tlaEditor}} (accessed: {{dateToday}})');"><span class="fas fa-clipboard"></span>Copy citation</button>
		</div>  
            
	
            
		</div> <!-- close content col-sm-8 -->	

		<!-- Sidebar -->
		<div class="col-sm-4">
            <div class="sticky-top">
				<!-- Lemma ID feld -->
				<!--<h6 class="id mt-2">Lemma ID {{lemma.id}}</h6> 
				<button type="button" class="btn btn-light btn-sm text-left text-decoration-none copy-to-clipboard-btn" onclick="copyStringToClipboard('{{lemma.id}}')"><span class="fa fa-clipboard"></span>Copy ID</button>-->
				
				<!-- Verweise -->
				<!-- ## in Hauptfeld verschieben, dann rechte Kolumne immer nur mit Buttons/Navi -->
				<!--<p class="h6 pt-4 pb-1 pl-3">Bibliography</p>
				{% for bib in bibl %}
					<button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-right"></span>{{ bib }}</button>
				{% endfor %}
				<hr>
				<p class="h6 pt-1 pb-1 pl-3">External Identifiers</p>
				{% for provider, identifiers in lemma.externalReferences.items %}
					<button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-right"></span>{{provider}} 
						{% for identifier in identifiers %}
							<em>{{identifier}}</em>
						{% endfor %}
					</button>
				{% endfor %}-->
				
				<!-- Buttons -->
				<br>
				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail hieroglyph-btn "><i class="fas fa-plus-circle"></i>Hieroglyphs</button>
				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail lemma-id-btn "><i class="fas fa-plus-circle"></i>Lemma ID</button>
				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail word-class-btn"><span class="fas fa-plus-circle"></span>Word Class</button>
				<!-- start LANGUAGE buttons -->
                <button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail languages-btn"><i class="fas fa-plus-circle">
                </i>Translation Languages</button>                 
				
                <div class="indented-buttons indented-buttons-lang hide">
                     <button class="btn btn-block btn-secondary text-left translation-languages-btn-de" type="button">German</button>
                    <button class="btn btn-block btn-secondary text-left translation-languages-btn-en" type="button">English</button>
                    <button class="btn btn-block btn-secondary text-left translation-languages-btn-fr" type="button">French</button>
				</div>
				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail attestation-time-btn "><i class="fas fa-plus-circle"></i>Attestation time</button>
				<button type="button" class="btn btn-block btn-secondary text-left text-decoration-none show-detail bibliografical-btn "><i class="fas fa-plus-circle"></i>Bibliographical references </button>  
				
				<!-- Navigation -->
				<br>
				<button type="button" class="btn btn-block btn-light text-left text-decoration-none"><span class="fas fa-search-plus"></span>Select for Combination Search</button>
				<a href="javascript:history.back()"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-left"></span>Back to search results</button></a>
				<!-- anstelle des historyBack sollte u.U. der Search-String verwendet werden -->
				<a href="/search"><button type="button" class="btn btn-block btn-red text-left text-decoration-none"><span class="fas fa-arrow-circle-left"></span>Modify Search</button></a>
            </div>    
		</div>		
	</div> <!-- /.row -->
	
			
    
    <!-- Modal for Comments-->
    <div class="modal fade" id="modal_comments" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Comment this lemma entry</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
             <div class="input-group mb-2">
                <input type="text" class="form-control" placeholder="Your Name" aria-label="Username" aria-describedby="basic-addon1">
              </div>
             <div class="input-group mb-2">
                <input type="text" class="form-control" placeholder="Your E-mailadress" aria-label="Username" aria-describedby="basic-addon1">
              </div>
              
            <div class="input-group">           
              <textarea class="form-control" aria-label="With textarea" placeholder="Your Comments"></textarea>
            </div>
              
          </div>
            
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-info">Send</button>
            <p>Thank you for helping to imrove the data! Your comment will be evaluated and edited by a TLA team member.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Sharing-->
    <div class="modal fade" id="modal_sharing" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Share this lemma entry</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">            
              <a href="mailto:?subject=TLA,%20Lemma%20{{lemma.id}}&amp;body=TLA lemma ID {{lemma.id}} ( {% for word in lemma.words %}{{word.transcription}} {% endfor %}), &lt;{{tlaBaseURL}}/view/lemma/{{lemma.id}}&gt;, in: {{tlaTitle}} &lt;{{tlaBaseURL}}&gt;, Version {{tlaVersion}}.{{tlaIssue}}, {{tlaReleaseDate}}, ed. by {{tlaEditor}} (accessed: {{dateToday}})" class="btn btn-block btn-info" role="button"><span class="far fa-envelope"></span>E-Mail</a> 
              <a href="#" class="btn btn-block btn-info" role="button"><span class="fab fa-twitter"></span>Twitter</a> 
              <a href="#" class="btn btn-block btn-info" role="button"><span class="fab fa-facebook"></span>Facebook</a> 
          </div>
        </div>
      </div>
    </div>
  
</div>
 <!-- /.container -->  	
{% endblock %}